{%- import "icons.html" as icons -%}

{%- macro list_item(name, value) -%}
<li class="list-row">
  <div></div>
  <div class="gap-3 grid grid-cols-2 list-col-grows">
    <p class="break-all font-bold text-primary"> {{name}} </p>
    <p> {{ value }} </p>
  </div>
</li>
{%- endmacro -%}

<div class="content-card flex flex-col gap-4" >
  <h2 class="opacity-60 text-lg tracking-wide">Upsd State</h2>
  <ul class="list">
    {%- call list_item("nut_webgui version", crate::http::hypermedia::utils::get_app_info().version) -%}
    {%- call list_item("state", state.status) -%}

    {%- match state.last_device_sync -%}
      {%- when Some(date) -%}
        {%- call list_item("last sync", date) -%}
      {%- when None -%}
        {%- call list_item("last sync", "never") -%}
    {%- endmatch -%}

    {%- match state.prot_ver -%}
      {%- when Some(prot_ver) -%}
        {%- call list_item("protocol version", prot_ver) -%}
      {%- when None -%}
        {%- call list_item("protocol version", "-") -%}
    {%- endmatch -%}

    {%- match state.ver -%}
      {%- when Some(ver) -%}
        {%- call list_item("daemon version", ver) -%}
      {%- when None -%}
        {%- call list_item("daemon version", "-") -%}
    {%- endmatch -%}

    {%- call list_item("connected devices", state.devices.len()) -%}
  </ul>
</div>

